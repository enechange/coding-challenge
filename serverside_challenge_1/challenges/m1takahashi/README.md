# ENECHANGE株式会社様 技術課題
## 概要
- ユーザーから契約アンペア数(A)と1ヶ月の使用量(kWh)を受け取って、プランごとの電気料金を返すAPI

## 検証URL
- PublicRepositoryのREADMEですので、別途、お伝えします。

## API仕様

### URL

```
GET /api/v1/plans/index HTTP/1.1
```

### Request

| パラメータ | 内容 | 必須 | デフォルト値 | 最大値 | 備考 |
|  ---  |  ---  |  ---  |  ---  |  ---  |  ---  |
| ampere | 契約アンペア数（A） | 必須 | -- | -- | 10/15/20/30/40/50/60のいずれか |
| amount | 使用量 | 必須 | 0 | 999,999 | |

### Response

| パラメータ | 内容 | 必須 |
|  ---  |  ---  |  ---  |
| code | コード: 成功の場合には0を返し,エラーの場合には1以上の値を返す | 必須 |
| message | メッセージ: エラーの場合にはエラーメッセージ,成功の場合には空を返す | 必須 |
| data[] | 結果配列 | 必須（結果がない場合には,空の配列） |
| data[].provider_name | 電力会社名 | 必須 |
| data[].plan_name | プラン名 | 必須 |
| data[].price | 電気料金（概算の為,小数点以下切り上げ） | 必須 |

#### 成功レスポンス例

```
HTTP/1.1 200 OK
{ "code":0,
  "message":"",
  "data":[
    {"provider_name":"東京電力エナジーパートナー","plan_name":"従量電灯B","price":3490},
    {"provider_name":"Looopでんき","plan_name":"おうちプラン","price":3194}
  ]
}
```

#### 失敗レスポンス例

```
HTTP/1.1 200 OK
{ "code":1,
  "message":"契約アンペア数が正しくありません",
  "data":[]
}
```

## システム構成

### 言語,フレームワーク
- Ruby 3.0.0
- Rails 6.1.6

## 環境
- 開発環境: AWS Cloud9
- 検証環境: AWS App Runner

## 要件など
### データは、CSVやYAMLなどのファイルで管理して読み込んでください。
- ファイルはご用意ください（CSVやYAML形式など）。
- ファイルの用意が必須の為、データベースでのマスタ管理を行うと二重管理になるので、データベースは利用しない。
- ActiveRecordを使っても、ActiveYamlを使っても、抽象化されたModelに変わりないので、将来的にデータベースに移行も可能

## データ構造
- 電力会社マスタ（provider）
 - プラン（plan）現状,電力会社は複数プランを持たないので,電力会社マスタに組み込む（第三正規化は行わない）
- 基本料金マスタ（basic_charge）電力会社:基本料金（1:n）
- 従量料金マスタ（commodity_charge） 電力会社:従量料金（1:n）
